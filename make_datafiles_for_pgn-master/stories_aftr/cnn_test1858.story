New York (CNN) -- After more than two decades behind bars, David Ranta walked out of a Brooklyn courthouse Thursday afternoon with an apology from a judge and one immediate wish: "Get the hell out of here."

Ranta had been convicted of second-degree murder in 1991 for killing a rabbi during a botched diamond heist. But two decades later, a onetime witness said he had been coached into identifying Ranta in a police lineup -- and after an investigation, prosecutors recommended that Ranta's conviction be tossed out.

"Mr. Ranta, to say that I'm sorry for what you have endured would be an understatement and grossly inadequate, but I say it to you anyway," Judge Miriam Cyrulnik said during an emotional hearing that left even the judge wiping her eyes.

Asked what he wanted to do now, Ranta told reporters at the courthouse, "Get the hell out of here." And with that, he walked out with his lawyer, carrying a small mesh bag that held his belongings.

For now, Ranta plans to relax and reconnect with his family, Sussman said.

'A number of things' wrong with the case

Ranta, now 58, was sentenced to 37 1/2 years to life in prison in the killing of Chaskel Werzberger, a rabbi in Brooklyn's Williamsburg community.

Prosecutors have determined the evidence underpinning Ranta's conviction "has been degraded to such an extent" that it would no longer support the verdict, said John O'Mara, the deputy district attorney in charge of Brooklyn's conviction integrity unit.

But O'Mara said the investigation found "a number of things that were wrong with the case."

"It was cumulative," he said. New evidence led prosecutors to believe "that we could no longer be confident" that Ranta was guilty beyond a reasonable doubt.

A witness changes his story

In 2011, he told investigators that he identified Ranta after being told by a detective to "Pick the guy with the big nose."

"As he started to investigate, the whole case fell apart," Lieberman said. "So I guess an innocent man was in jail but is now free. The sad part is that the killer never met justice."

"Now it's David Ranta's day to suck in some fresh air and enjoy his free life out there," Abraham said. But he said the decision to release him left him "confused."

"Is the shooter still out there? We're pointing to a dead man to close the case? That's asinine," he said.

Werzberger died four days after being shot, a victim of the attempted holdup of a diamond courier. The courier escaped, but the would-be robber shot Werzberger through the window of his parked car, hauled him out of the vehicle and drove off, according to the Brooklyn district attorney's office.

Ranta was arrested six months later, when two men facing trial on their own robbery charges gave his name to police, prosecutors recounted in asking that his conviction be tossed out.

When questioned by detectives, Ranta initially denied any involvement in the killing. Then he acknowledged knowing one of the jail inmates who identified him, according to prosecutors. He admitted he had been near the scene and knowing his friends had planned a holdup. Then he admitted he had been involved in planning the diamond heist, acted as the lookout and had seen the other men with the gun.

"The police had an alleged confession from him, but there was no physical evidence," Michael Baum, the lawyer who represented Ranta at his trial, told CNN. "The jewelry courier, he testified for the defense, saying that Ranta wasn't the guy."

Four years after Ranta's conviction, a woman named Theresa Astin came forward to say her husband had been the killer. Joseph Astin, who had died in a 1990 car accident, had been possible suspect before: Scarcella had brought the courier to the morgue in hopes that he could identify Astin as the gunman, but he couldn't.

"It was on his conscience for all these years," Baum said. "He was 13 years old at the time. He was just a kid. He was just doing what they told him to do."

Detective: 'I never framed anyone'

"They're saying that I framed it," Scarcella said. "I want to go on record saying this: I never framed anyone in my life, and you would have to be a low, low devil to do something like that. I slept very good for the last 22 years."

But Sussman, Ranta's attorney, called the case "a travesty of justice from the beginning."

Arizona woman's murder conviction, death sentence overturned

CNN's Mary Snow reported from New York. CNN's Matt Smith and Catherine E. Shoichet reported from Atlanta. CNN's Aaron Cooper, Raelyn Johnson and Laura Ly contributed to this report.

@highlight

NEW: Attorney: "My client had 23 years taken from him"

@highlight

NEW: Witness: "I was too young back then to realize this was a setup"

@highlight

David Ranta served 21-plus years for the killing of a Brooklyn rabbi in 1990

@highlight

A witness told prosecutors he'd been coached, leading to the charges being dismissed

