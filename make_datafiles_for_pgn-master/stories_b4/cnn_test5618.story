Bettina Rodriguez and her daughter Isabel had planned their cruise for half a year. They would sail on the Carnival Triumph cruise ship and celebrate Isabel's birthday.

It was the trip of a lifetime. That is, until they awoke to a fire alarm, smoke in their hallway and then days and days of misery. Human waste was actually piling up in bags just outside their door.

"Just on our deck alone, there were the biohazard bags lined up across the floor," Bettina Rodriguez said. "We're talking about raw sewage at just the end of our deck alone.  It was repulsive."

It was a nightmare, Rodriguez said. Now the nightmare has been made worse, she said, because of company documents that have just come to light. The cruise line's own reports, inspections and maintenance records detail a problem that had been developing on the Triumph more than a year before Rodriguez and her daughter were on board.

Exclusive documents obtained by CNN now reveal the fiasco on the Triumph as a disaster waiting to happen.

More than 4,000 passengers and crew members were stranded aboard what's now known as the "poop cruise" after a fire knocked out the ship's power. The ship drifted four days before it could be towed into Mobile, Alabama -- the whole time without air conditioning, and largely without lights, water, food and working toilets.

CNN has learned that the crew of the Triumph set sail in February with only four of six generators fully operational, knowing that the company had an ongoing generator fire hazard in ships across its fleet, including Triumph.

Houston attorney Frank Spagnoletti represents the Rodriguez family and several dozen other passengers from the ill-fated Carnival Triumph who have filed suit against Carnival Cruise Lines.

"That ship never should have set sail in February," Spagnoletti said. "It was unseaworthy at the commencement of the voyage. These documents tell you that the company -- and I'm saying to you the corporation back in Miami -- had knowledge of the fact that this vessel had a propensity for fires; that there were things that could have been, should have been, and weren't done in order to make sure that fires didn't take place."

The first trouble with Triumph was in diesel generator No. 6 -- the one that wound up catching fire. Starting more than a year before the infamous cruise, that generator was overdue for maintenance, often not in compliance with the safety laws of the sea, known as SOLAS, according to the ship's engineer.

Read the document about the generator (PDF)

Over and over again, Carnival's own maintenance reports stated the same thing: Diesel generator No. 6 was overdue for maintenance. The company says the fire that originated with the generator was not connected to the lack of maintenance. But, during that same time period, Carnival learned about another, even more alarming safety problem in the engine room: fuel lines.

A dangerous pattern of leaks had emerged on other Carnival cruise ships, according to the company's documents. In fact, Carnival's Costa Allegra caught fire in the Indian Ocean in February 2012 because fuel leaked onto a hot spot and ignited. That fire left the ship without power for three days in tropical heat of nearly 100 degrees Fahrenheit.

Read Carnival's advisory notice (PDF)

That would be eerily similar to what started the fire on board the Triumph one year later.

Carnival says it proactively began investigating after the Costa Allegra fire and found a big problem in a different type of fuel line. There had been nine incidents resulting in fuel leaks associated with flexible fuel lines in just two years.

Spate of fires pose problem for cruise industry

On January 2,  Carnival issued a compliance order, giving ships two months to address the problem to "ensure a suitable spray shield ... is installed" for all diesel engines using the flexible fuel lines.

"After that internal study, the company came out with a new policy to, again, shield all the flanges and the hoses," said Mark Jackson, Carnival Cruise Lines vice president of technical operations.

But Carnival did not in fact shield the part of the one hose that wound up causing the tragedy on board the Triumph in February.

"That hose was beneath the deck plates, and it was believed the deck plates would provide that shield," Jackson said. "In this case, it (the fuel leak) found that gap in the hose ... in the bilge plates and caused the fire."

On February 7 -- with a diesel generator still in need of overhaul and fuel line shields on some, but not all, of its flexible hoses -- Triumph set sail from Galveston Texas.  Three days later, off the coast of Mexico, a fire broke out in diesel generator No. 6 when fuel sprayed from a flexible fuel line, even though that fuel line was only six months old.

"We were totally in compliance ... with all the rules and regulations," Jackson said. "We had ... our regulating bodies on board the ship less than two weeks prior that had certified the ship to sail. Obviously, you learn things on a situation, on an incident such as the Triumph."

Those regulating bodies included the U.S. Coast Guard and Lloyd's insurance.

While Carnival Cruise Lines insists that what happened on the Triumph was just an accident, the company has dedicated $300 million in a fleet-wide safety upgrade, focusing on detecting and preventing any potential fire hazards in its engine rooms.

The company also points out to the passengers suing that the cruise line never promised a safe trip.

Carnival's court filing says the "ticket contract makes absolutely no guarantee for safe passage, a seaworthy vessel, adequate and wholesome food, and sanitary and safe living conditions."  Since the Triumph fire, Carnival says it has instituted a 110% money-back "Great Vacation Guarantee" on its cruises.

Fraction of cruise ship crimes are made public

@highlight

An engine room fire left the Carnival Triumph adrift in February

@highlight

Passengers reported overflowing toilets and other unsanitary conditions

@highlight

Documents show spray shields were not installed on a fuel line that leaked

@highlight

Despite that, the Coast Guard approved the ship for sailing
